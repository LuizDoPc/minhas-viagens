(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){e.exports=a(297)},124:function(e,t,a){},128:function(e,t,a){},130:function(e,t,a){},132:function(e,t,a){},134:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(16),r=a.n(i),c=(a(124),a(40)),l=a.n(c),s=a(79),d=a(53),u=a(54),m=a(56),p=a(55),h=a(57),g=(a(128),function(e){return o.a.createElement("button",{className:"toggle-button",onClick:e.click},o.a.createElement("div",{className:"toggle-button__line"}),o.a.createElement("div",{className:"toggle-button__line"}),o.a.createElement("div",{className:"toggle-button__line"}))}),f=(a(130),function(e){return o.a.createElement("header",{className:"toolbar"},o.a.createElement("nav",{className:"toolbar__navigation"},o.a.createElement("div",{className:"toolbar__toggle-button"},o.a.createElement(g,{click:e.drawerClickHandler})),o.a.createElement("div",{className:"toolbar__logo"},o.a.createElement("a",{href:"/"},"Minhas Viagens")),o.a.createElement("div",{className:"spacer"}),o.a.createElement("div",{className:"toolbar_navigation-items"},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){return e.setModalVisible(!0)}},"Adicionar nova cidade"))))))}),v=(a(132),function(e){var t="side-drawer";return e.show&&(t="side-drawer open"),o.a.createElement("nav",{className:t},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"/"},"Adicionar nova cidade"))))}),b=(a(134),function(e){return o.a.createElement("div",{className:"backdrop",onClick:e.click})}),w=a(41),k=a(80),E=a.n(k),y=a(111),C=a(115),M=a.n(C),N=a(118),O=a.n(N),S=a(117),j=a.n(S),V=a(78),_=a.n(V),I=a(58),W=a.n(I),A=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={selectedPlace:"",activeMarker:{},showingInfoWindow:!1,cities:[],cityName:"",resultList:[],newMarkers:[]},a.onMarkerClick=function(e,t,n){a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.onMapClicked=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.onCloseModal=function(){a.props.setModalVisible(!1)},a.handleSubmit=function(e){e.preventDefault(),a.props.geoCoding(a.state.cityName).then(function(e){a.setState({resultList:e.results})})},a.addMarker=function(e){a.state.cities.push({name:e.address_components[0].long_name,lat:e.geometry.location.lat,lng:e.geometry.location.lng}),a.props.setModalVisible(!1),E.a.database().ref("/Cidades").child("".concat(a.state.cities.length+1)).set({Nome:e.address_components[0].long_name})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;E.a.database().ref("/Cidades").once("value").then(function(t){var a=[];t.val().forEach(function(t){e.props.geoCoding(t.Nome).then(function(n){"OK"===n.status&&a.push({name:t.Nome,lat:n.results[0].geometry.location.lat,lng:n.results[0].geometry.location.lng}),e.setState({cities:a})})})})}},{key:"render",value:function(){var e=this,t=[];this.state.resultList.forEach(function(a){t.push(o.a.createElement(M.a,{key:a},o.a.createElement(j.a,null,o.a.createElement(W.a,{variant:"h5",component:"h2"},a.formatted_address),o.a.createElement(W.a,{color:"textSecondary"},"Latitude: ",a.geometry.location.lat),o.a.createElement(W.a,{color:"textSecondary"},"Longitude: ",a.geometry.location.lng)),o.a.createElement(O.a,null,o.a.createElement(_.a,{size:"small",onClick:function(){return e.addMarker(a)}},"Escolher"))))});var a=[];return this.state.cities.forEach(function(t){a.push(o.a.createElement(w.Marker,{key:t.lat+t.lng+t.name,onClick:e.onMarkerClick,name:t.name,position:{lat:t.lat,lng:t.lng}}))}),o.a.createElement("div",null,o.a.createElement(w.Map,{google:this.props.google,onClick:this.onMapClicked,zoom:4.45,initialCenter:{lat:-14.5401117,lng:-45.1187843}},a,o.a.createElement(w.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},o.a.createElement("div",null,o.a.createElement("h1",null,this.state.selectedPlace.name)))),o.a.createElement(y.a,{open:this.props.modalVisible,onClose:this.onCloseModal.bind(this),center:!0},o.a.createElement("h2",null,"Adicionar nova Cidade"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,"Nome da cidade: "),o.a.createElement("input",{value:this.state.cityName,onChange:function(t){e.setState({cityName:t.target.value})}}),o.a.createElement("input",{type:"submit",value:"Enviar"}),o.a.createElement("div",null,t))))}}]),t}(n.Component),x=Object(w.GoogleApiWrapper)({apiKey:"AIzaSyAxt-VCR6Hc3dCH8yt6hVpQwIub-vqQBMU"})(A),H=a(2),D=a.n(H),L=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={sideDrawerOpen:!1,modalVisible:!1},a.drawerToggleClickHandler=function(){a.setState(function(e){return{sideDrawerOpen:!e.sideDrawerOpen}})},a.backdropClickHandler=function(){a.setState({sideDrawerOpen:!1})};return D.a.apps.length||D.a.initializeApp({apiKey:"AIzaSyCevUPMzUXYl9S63Zm6Wexy6CM0KSvgqp4",authDomain:"appdaana-89bcc.firebaseapp.com",databaseURL:"https://appdaana-89bcc.firebaseio.com",projectId:"appdaana-89bcc",storageBucket:"appdaana-89bcc.appspot.com",messagingSenderId:"97719053670"}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"geoCoding",value:function(){var e=Object(s.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(l.a.mark(function e(a,n){var o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(t,"&key=AIzaSyAxt-VCR6Hc3dCH8yt6hVpQwIub-vqQBMU"));case 2:o=(o=e.sent).json(),a(o);case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setModalVisible",value:function(e){this.setState({modalVisible:e})}},{key:"render",value:function(){var e;return this.state.sideDrawerOpen&&(e=o.a.createElement(b,{click:this.backdropClickHandler})),o.a.createElement("div",{style:{height:"100%"}},o.a.createElement(f,{drawerClickHandler:this.drawerToggleClickHandler,setModalVisible:this.setModalVisible.bind(this)}),o.a.createElement(v,{show:this.state.sideDrawerOpen}),e,o.a.createElement("main",{style:{marginTop:"64px"}},o.a.createElement(x,{geoCoding:this.geoCoding.bind(this),setModalVisible:this.setModalVisible.bind(this),modalVisible:this.state.modalVisible})))}}]),t}(n.Component),z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(L,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/minhas-viagens",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/minhas-viagens","/service-worker.js");z?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):U(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):U(e)})}}()}},[[119,2,1]]]);
//# sourceMappingURL=main.9933f7c4.chunk.js.map